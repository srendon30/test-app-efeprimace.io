import{r,q as xt,J as mt,b as bt,j as yt,K as ht,x as wt,m as x,M as se,N as Ie,c as u,o as l,g as B,d as Q,a,n as Z,e as w,P as T,F as G,y as z,t as c,a2 as _t,Q as Ee,A as oe,i as Ce,p as f,z as U,h as m,Z as kt,H as D,S as p,L as ne,a3 as Re,a4 as Se}from"./index--L0b__mi.js";import{u as It,A as Et}from"./business-DQ0PhIfX.js";/* empty css                                              */import{c as Ae,_ as Ct,s as Rt,g as St,e as At}from"./BaseForm-DrjkU4Ed.js";import Ot from"./BaseTable-BwIqifez.js";/* empty css                                                              */import"./CurrencyInput-DOc8TzzC.js";import"./Modal-Dyo44v8a.js";import"./IconX-BLOIGDHv.js";import"./ViewDetails-n-RkcBNF.js";import"./featureFlags-C9HAkJ2d.js";const Bt={key:1},Tt={class:"bg-orange-100 border border-orange-600 my-4 rounded-lg"},Dt={class:"text-sm text-orange-500 ml-4"},Nt={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},Pt={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},jt={class:"transition-all duration-300 grid grid-cols-4 gap-4"},Lt={class:"text-lg text-center text-orange-800 dark:text-gray-300"},Vt={class:"text-lg text-center text-orange-800 dark:text-gray-300"},Gt={class:"flex flex-col justify-center my-4"},zt={class:"flex flex-row flex-wrap justify-center my-3 p-4 bg-identity-dark dark:border-gray-200 rounded-lg"},Ut={class:"flex flex-row items-center"},Mt=["id","value","name"],$t=["for"],Ht={class:"font-semibold"},qt={class:"flex flex-row items-center"},Ft=["id","value","name"],Jt=["for"],Wt={class:"font-semibold"},Kt={class:"basis-full text-center"},Yt=["disabled"],Qt={class:"flex flex-row my-4 justify-between"},Zt=["disabled"],Xt={class:"flex flex-row items-center"},ea={class:"mr-2"},ta={key:1,class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},aa=["disabled"],sa={class:"flex flex-row items-center"},oa={class:"mr-2"},na={key:1,class:"animate-spin h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ra=["disabled"],la={class:"flex flex-row items-center"},ia={class:"mr-2"},da={key:0},ca={key:1},ua=["onClick"],ga={class:"text-2xl text-identity-dark dark:text-gray-300 flex items-center"},va={class:"text-sm text-gray-500"},pa={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},fa={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},xa={class:"transition-all duration-300 px-4 py-2"},ma={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-amber-100 border border-amber-600"},ba={class:"flex flex-col justify-center basis-1/3"},ya={class:"text-lg text-center text-amber-800 dark:text-gray-300"},ha={class:"flex flex-col justify-center basis-1/3"},wa={class:"text-lg text-center text-amber-800 dark:text-gray-300"},_a={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-cyan-100 border border-cyan-600"},ka={class:"flex flex-col justify-center basis-1/3"},Ia={class:"text-lg text-center text-cyan-800 dark:text-gray-300"},Ea={class:"flex flex-col justify-center basis-1/3"},Ca={title:"Responsables",class:f(["m-1 p-1 rounded-md shadow-xl","bg-cyan-100 border border-cyan-600","custom-shadow"])},Ra={class:"p-4 bg-identity-2 dark:bg-gray-800"},Sa={class:"my-1 p-1 border-color-identity-dark dark:border-gray-200"},Aa={class:"text-identity-dark font-semibold dark:text-gray-300"},Oa={class:"inline-flex items-center px-3 py-1 rounded-full gap-x-2 bg-red-100 border border-red-600"},Ba={class:"flex flex-col justify-center basis-1/3"},Ta={class:"text-lg text-center text-cyan-800 dark:text-gray-300"},Da={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-orange-100 border border-orange-600"},Na={class:"flex flex-col justify-center basis-1/3"},Pa={class:"text-lg text-center text-orange-800 dark:text-gray-300"},ja={class:"flex flex-col justify-center basis-1/3"},La={class:"text-lg text-center text-orange-800 dark:text-gray-300"},Va={class:"flex flex-col justify-center basis-1/3"},Ga={class:"text-lg text-center text-orange-800 dark:text-gray-300"},za={class:"flex flex-row items-center px-3 py-1 rounded-lg my-4 bg-teal-100 border border-teal-600"},Ua={class:"flex flex-col justify-center basis-1/3"},Ma={class:"text-lg text-center text-teal-800 dark:text-gray-300"},$a={class:"flex flex-col justify-center basis-1/3"},Ha={class:"text-lg text-center text-teal-800 dark:text-gray-300"},qa={class:"flex flex-col justify-center basis-1/3"},Fa={class:"bg-white rounded-xl shadow-sm overflow-hidden p-1"},Ja={class:"relative h-6 flex items-center justify-center"},xs={__name:"Planeacion",setup(Wa){const re=r(!1);function le(t,e=0){return new Promise(n=>{setTimeout(()=>{re.value=t,n()},e)})}const Oe=()=>{Se("Planificación Generada con Éxito",{position:Se.POSITION.TOP_CENTER,toastClassName:"custom-toast"})};r(null),r(null),r(null);const Be=r(null),Te=r(["IconGantt","IconPeople","IconPlanning","IconCalendar","IconLoading"]),{iconsForm:N,loadFormIcons:De}=xt(),{formatPrettyDate:M,formatStoreDate:Ka,parseStoreDate:Ya,isDateBetweenDates:Qa,compareRangeDates:Za,addDaysToDate:Xa,compareDatesIsSame:es}=mt();let ie;const X=bt(),{backendUrlFC:ts}=yt(),{formatHours:de,parseStringToIntHours:ce,getResponsables:C,getOrdenTrabajo:P,getOrdenEtapas:Ne,getOrdenEtapaTasks:as,getOrdenEtapasGeneralTasks:ss,formatStringHours:ue,formatIntHours:os,getLaboralHoursPerDay:Pe}=It();ht(async()=>{ie(),Ae(),h.value&&clearInterval(h.value)}),wt(async()=>{qe.value=await C("all"),xe.value=await C("ingenieria"),me.value=await C("dibujo"),be.value=await C("cantidades"),ye.value=await C("coordinador-ingenieria"),he.value=await C("coordinador-dibujo"),await De(Te.value),Be.value=await Pe()});const je=()=>{Re.push({name:"planeacion-aplicada",params:{orden_id:d.value.id}})},R=r([]),ge=r(!1),$=r(!0),j=r({}),Le=x(()=>{let t=["id","show_data","estado"];return Object.keys(j.value).filter(e=>!t.includes(e))}),Ve=t=>t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),ve={proyecto:["codigo","nombre_proyecto"],tipoEstructura:["codigo","nombre"],tipoCimentacion:["codigo","nombre"]},Ge=(t,e)=>{if(t==="horas_ingenieria_estimadas"||t==="horas_dibujo_estimadas"){let n={horas_ingenieria_estimadas:"horas_estimadas_ingenieria",horas_dibujo_estimadas:"horas_estimadas_dibujo"},o=0;return v.value.forEach(s=>{o+=ce(s[n[t]])}),de(o)}if(t==="horas_totales_estimadas"){let n=0;return v.value.forEach(o=>{n+=ce(o.horas_estimadas_etapa)}),de(n)}return["velocidad_ingenieria","velocidad_dibujo"].includes(t)?j.value.tipoEstructura[t]:e===null?"Sin información":ve[t]?ve[t].map(n=>e[n]).join(" - "):e};ie=se(()=>At.data,async t=>{if(t&&t.actionSelected==="show_planning_table"){_e(),fe(!1),await le(!0),y.value=t.ordenId,v.value=await Ne(y.value),console.log("Orden Etapas: ",v.value),j.value=t.infoEstructura,console.log("Info Estructura: ",j.value);const e=await P(y.value);d.value=e.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates,ze(v.value),await le(!1,750),fe(!0),Ae()}},{immediate:!1});const ze=t=>{R.value=[],R.value=new Array(t.length).fill(!0)},Ue=t=>{R.value[t]=!R.value[t]},Me=()=>{$.value=!$.value},pe=r(!1),fe=t=>{pe.value=t},y=r(null),d=r(null),v=r(null),H=r(null),$e=["TODO","INGENIERIA","DIBUJO","CANTIDADES","REVISION (DE)","REVISION (DI)"],He={TODO:{key:"all",value:!0},INGENIERIA:{key:"area_responsable",value:"INGENIERIA"},DIBUJO:{key:"area_responsable",value:"DIBUJO"},CANTIDADES:{key:"area_responsable",value:"CANTIDADES"},"REVISION (DE)":{key:"titulo_actividad",value:"REVISION (DE)"},"REVISION (DI)":{key:"titulo_actividad",value:"REVISION (DI)"}},_=r([]),qe=r([]),xe=r([]),me=r([]),be=r([]),ye=r([]),he=r([]),S=r([]),Fe=x(()=>{const t=new Set;for(const e in b.value){const n=b.value[e];n.length>0&&(n.some(o=>o.area_responsable==="INGENIERIA"&&!L("REVISION",o.titulo_actividad))&&xe.value.forEach(o=>t.add(o)),n.some(o=>o.area_responsable==="DIBUJO"&&!L("REVISION",o.titulo_actividad))&&me.value.forEach(o=>t.add(o)),n.some(o=>o.area_responsable==="CANTIDADES"&&!L("REVISION",o.titulo_actividad))&&be.value.forEach(o=>t.add(o)),n.some(o=>L("REVISION",o.titulo_actividad)&&o.area_responsable==="INGENIERIA")&&ye.value.forEach(o=>t.add(o)),n.some(o=>L("REVISION",o.titulo_actividad)&&o.area_responsable==="DIBUJO")&&he.value.forEach(o=>t.add(o)))}return Array.from(t)}),L=(t,e)=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().includes(t);se(()=>H.value,t=>{t&&(ae.value=He[t])});const ee=r({}),Je=(t,e)=>{t&&(ee.value["actividades-"+e.id]=t)},te=r({}),We=()=>{for(const t in ee.value){const n=ee.value[t].sendRows();te.value[t]=n}},ae=r({}),b=r({}),Ke=(t,e)=>{b.value[we(t)]=e},q=x(()=>{let t=0;if(!b.value)return t;for(const e in b.value)t+=b.value[e].length;return t}),Ye=t=>{var e;return b.value&&((e=b.value[we(t)])==null?void 0:e.length)||0},we=t=>v.value[t].id,F=r("Asignar"),Qe=x(()=>F.value==="Asignar"?"Asignar Responsables":"Desasignar Responsables"),Ze=["Asignar","Desasignar"],Xe={asignar:"asignarActividadesOrdenEtapaMasiva",desasignar:"desasignarActividadesOrdenEtapaMasiva"},et=async()=>{try{const t=new URL(`api/massive/edit/form/${Xe[F.value.toLowerCase()]}`),e={ordenId:y.value,ordenEtapas:b.value,responsables:S.value};console.log("Data a enviar: ",e);const n=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${X.token}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(n.status===401)throw new D("Unauthorized: Porfavor vuelve a Iniciar Sesión",n.status);if(!n.ok)throw new D("Error al asignar responsables.",n.status);const o=await n.json();p.fire({title:o.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"}),_e(),o.newRows&&o.newOrdenEtapas&&(tt(o.newRows),at(o.newOrdenEtapas))}catch(t){ne(t)}},tt=async t=>{Rt({actionSelected:"update_rows_orden_etapas",newRows:t}),await St()},at=async t=>{t.forEach((e,n)=>{const o=v.value.findIndex(s=>s.id===e.id);o>=0&&(v.value[o]=e)})},_e=()=>{b.value={},S.value=[],H.value=null,ae.value={}},k=r(!1),J=r(!1),W=x(()=>{var t;return(t=d.value)==null?void 0:t.suggested_planning.tasks}),st=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)!=="GENERATED"&&!W.value}),V=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)==="REQUESTED"&&!W.value}),K=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)==="GENERATED"&&W.value}),Y=x(()=>{var t;return((t=d.value)==null?void 0:t.suggested_planning.estado)==="APPLIED"&&W.value}),ot=r(1e4);let h=r(null);se(V,t=>{t?(console.log("Requesting Orden Selected..."),h.value=setInterval(async()=>{const e=await P(y.value);d.value=e.ordenTrabajo,_.value=d.value.responsablesOnOrder,console.log("Orden Seleccionada... ",d.value),console.log("Responsables Orden... ",_.value)},ot.value)):(console.log("No se ha solicitado generación de planeación automática"),h.value&&(Oe(),clearInterval(h.value),h.value=null))},{immediate:!0});const I=x(()=>h.value&&V.value?{text:"Generando...",class:"bg-cyan-600 hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0,show:!0}:K.value?{text:k.value?"Cargando...":"Ver Planeación Sugerida",class:"bg-emerald-500 hover:bg-emerald-700 dark:bg-emerald-600 dark:hover:bg-emerald-800",icon:k.value?"IconLoading":"IconPlanning",loading:k.value,disabled:k.value,show:!0}:Y.value?{text:"Planeación Aplicada",class:"bg-emerald-500 hover:bg-emerald-700 dark:bg-emerald-600 dark:hover:bg-emerald-800",icon:"IconPlanning",loading:!1,disabled:!0,show:!1}:k.value?{text:"Solicitando...",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0,show:!0}:{text:"Solicitar Planeación Automática",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconPlanning",loading:!1,disabled:!1,show:!0}),E=r(!1),A=x(()=>h.value&&V.value?{text:"Generando...",class:"bg-cyan-600 hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0}:K.value?{text:E.value?"Cargando...":"Regenerar Planeación Sugerida",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:E.value?"IconLoading":"IconPlanning",loading:E.value,disabled:E.value}:E.value?{text:"Solicitando...",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconLoading",loading:!0,disabled:!0}:{text:"Regenerar Planeación Automática",class:"bg-identity-dark hover:bg-gray-700 dark:bg-orange-600 dark:hover:bg-orange-800",icon:"IconPlanning",loading:!1,disabled:!!K.value}),nt=()=>{A.value.disabled||(console.log("Regenerar Planeación Automática"),rt())},rt=async()=>{ct();const t=await P(y.value);if(d.value=t.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates,console.log("Orden Seleccionada: ",d.value),console.log("Responsables Orden: ",_.value),V.value){p.fire({title:"Ya se ha solicitado una planeación automática",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"}),O();return}if(st.value){p.fire({title:"No se ha generado una planeación automática para este proyecto.",icon:"warning",confirmButtonText:"Aceptar",confirmButtonColor:"#2563EB"}),O();return}p.fire({title:"¿Estás seguro de re-generar una planeación automática?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, generar",cancelButtonText:"Cancelar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280"}).then(async e=>{if(e.isConfirmed)try{const n=new URL("api/re-generate-automatic-planning"),o={orden_id:d.value.id,ordenEtapas:v.value},s=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${X.token}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});if(s.status===401)throw O(),new D("Unauthorized: Porfavor vuelve a Iniciar Sesión",s.status);if(!s.ok)throw O(),new D("Error al generar la planeación automática.",s.status);const i=await P(y.value);d.value=i.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates;const g=await s.json();p.fire({title:g.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"}),O()}catch(n){ne(n)}else O()})},lt=()=>{Re.push({name:"planeacion-sugerida",params:{orden_id:d.value.id}})},it=async()=>{if(!I.value.disabled){if(ut(),K.value){const t=JSON.parse(d.value.suggested_planning.tasks);console.log("Original PLANNING TASKS RESPONSE Tasks: ",t),lt(),ke();return}await dt(),ke()}},dt=async()=>{if(gt()){p.fire({title:"Existen etapas sin responsables asignados",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"});return}if(vt()){p.fire({title:"Existen actividades sin responsables asignados",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"});return}if(V.value){p.fire({title:"Ya se ha solicitado una planeación automática",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"});return}return p.fire({title:"¿Estás seguro de generar una planeación automática?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, generar",cancelButtonText:"Cancelar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280"}).then(async t=>{if(t.isConfirmed){let e;await p.fire({title:"¿Deseas asignar una fecha tentativa de inicio?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, asignar",cancelButtonText:"No, continuar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280"}).then(async n=>{if(n.isConfirmed){const{value:o}=await p.fire({title:"Selecciona la fecha",html:'<input type="date" id="fechaInput" class="swal2-input" required>',focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",confirmButtonColor:"#EC7522",cancelButtonColor:"#6B7280",preConfirm:()=>document.getElementById("fechaInput").value,inputValidator:s=>{if(!s)return"¡Debes seleccionar una fecha!"}});if(o){const[s,i,g]=o.split("-");e={year:parseInt(s,10),month:parseInt(i,10),day:parseInt(g,10)}}}}),e?console.log("Fecha Tentativa: ",e):console.log("No se seleccionó fecha tentativa");try{const n=new URL("api/generate-automatic-planning"),o={orden_id:d.value.id,ordenEtapas:v.value,fecha_tentativa_inicio:e},s=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${X.token}`,"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});if(s.status===401)throw new D("Unauthorized: Porfavor vuelve a Iniciar Sesión",s.status);if(!s.ok)throw new D("Error al generar la planeación automática.",s.status);const i=await P(y.value);d.value=i.ordenTrabajo,_.value=d.value.responsablesOnOrderWithOwnNotAvailableDates;const g=await s.json();p.fire({title:g.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#EC7522"})}catch(n){ne(n)}}})},ct=()=>{E.value=!0},O=()=>{E.value=!1},ut=()=>{k.value=!0},ke=()=>{k.value=!1},gt=()=>{for(const t of v.value)if(t.responsables.length===0)return!0;return!1},vt=()=>{We();for(const t in te.value)if(te.value[t].some(n=>n.responsables.length===0))return!0;return!1},pt=t=>({"bg-green-200":t<105,"bg-orange-200":t>105&&t<120,"bg-red-200":t>120}),ft=t=>({"text-green-800":t<105,"text-orange-800":t>105&&t<120,"text-red-800":t>120});return r([]),(t,e)=>{const n=Ie("multiselect"),o=Ie("VDropdown");return l(),u("main",null,[re.value?(l(),B(Et,{key:0})):Q("",!0),e[28]||(e[28]=a("div",{class:"wrapper flex items-center justify-center mb-10"},[a("h1",{class:"text-2xl text-identity-dark dark:text-gray-300"},"Planeación")],-1)),Z(Ct,{"type-form":"planeacion","icons-view":["IconPlanning"],"action-selected":"planning"}),pe.value?(l(),u("div",Bt,[a("div",Tt,[a("div",{class:"flex justify-center items-center p-4 text-center cursor-pointer rounded-lg border-b border-orange-600",style:{"border-bottom-width":"0.5px"},onClick:Me},[e[6]||(e[6]=a("h2",{class:"text-2xl text-orange-800 dark:text-gray-300 flex items-center"}," Información Estructura ",-1)),a("span",Dt,[$.value?(l(),u("svg",Nt,e[4]||(e[4]=[a("path",{"fill-rule":"evenodd",d:"M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(l(),u("svg",Pt,e[5]||(e[5]=[a("path",{"fill-rule":"evenodd",d:"M14.707 10.707a1 1 0 01-1.414 0L10 7.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)])))])]),w(a("div",jt,[(l(!0),u(G,null,z(Le.value,(s,i)=>(l(),u("div",{key:i,class:"border-r border-b border-orange-600 p-2",style:{"border-bottom-width":"0.5px"}},[a("div",null,[a("h2",Lt,c(Ve(s))+": ",1),a("h2",Vt,c(Ge(s,j.value[s])),1)])]))),128))],512),[[T,!$.value]])]),a("div",Gt,[a("div",zt,[(l(),u(G,null,z($e,(s,i)=>a("div",{key:i,class:"flex flex-col items-center my-2 p-2 border rounded-lg"},[a("div",Ut,[w(a("input",{type:"radio",id:`option-radio-${i}-${s}`,"onUpdate:modelValue":e[0]||(e[0]=g=>H.value=g),value:s,name:`options-${i}-responsables`,class:"cursor-pointer w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-orange-500"},null,8,Mt),[[Ee,H.value]]),a("label",{for:`option-radio-${i}-${s}`,class:"cursor-pointer ml-2 text-sm font-medium text-gray-300 dark:text-gray-300"},[a("span",Ht,c(s),1)],8,$t)])])),64)),e[8]||(e[8]=_t('<div class="flex justify-center basis-full text-center mt-4"><div class="basis-full"><label for="responsables" class="block text-sm text-identity dark:text-gray-300 max-w-full"><div class="flex justify-center flex-row max-w-full"><span class="relative flex h-2 w-2 mt-1.5 max-w-full"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span><span class="ml-2 max-w-full truncate"> Responsables :</span></div></label></div></div>',1)),Z(n,{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=s=>S.value=s),"tag-placeholder":"Nuevo tag",placeholder:"Selecciona una o más opciones","selected-label":"Seleccionado","select-label":"Seleccionar","deselect-label":"Deseleccionar","track-by":"id",options:Fe.value,multiple:!0,disabled:q.value===0,label:"show_data",class:"mb-4"},{noResult:oe(()=>e[7]||(e[7]=[Ce(" No hay resultados ",-1)])),_:1},8,["modelValue","options","disabled"]),(l(),u(G,null,z(Ze,(s,i)=>a("div",{key:i,class:"flex flex-col items-center my-2 p-2 border rounded-lg"},[a("div",qt,[w(a("input",{type:"radio",id:`option-radio-${i}-${s}`,"onUpdate:modelValue":e[2]||(e[2]=g=>F.value=g),value:s,name:`options-${i}-actions`,class:"cursor-pointer w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-orange-500"},null,8,Ft),[[Ee,F.value]]),a("label",{for:`option-radio-${i}-${s}`,class:"cursor-pointer ml-2 text-sm font-medium text-gray-300 dark:text-gray-300"},[a("span",Wt,c(s),1)],8,Jt)])])),64)),a("div",Kt,[a("button",{onClick:et,class:f(["mt-4 px-4 py-2 text-sm text-identity-dark capitalize transition-colors duration-200 border rounded-md gap-x-2 dark:text-gray-200 dark:border-gray-200",[q.value===0||S.value.length===0?"bg-gray-400":"bg-identity hover:bg-orange-700 dark:bg-orange-600 dark:hover:bg-orange-800"]]),disabled:q.value===0||S.value.length===0},[a("span",null,c(Qe.value),1)],10,Yt)])])]),a("div",Qt,[a("div",{class:f(["inline-flex items-center px-3 py-1 rounded-full gap-x-2",["bg-cyan-100 border border-cyan-600"]])},[a("h2",{class:f(["text-sm text-center font-normal",["text-cyan-800"]])},c(q.value)+" Actividades seleccionadas. ",1)]),Y.value?(l(),u("button",{key:0,onClick:nt,class:f(["px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border rounded-md dark:text-gray-200 dark:border-gray-200",[A.value.class]]),disabled:A.value.disabled},[a("div",Xt,[a("div",ea,[A.value.loading?(l(),u("svg",ta,e[9]||(e[9]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"},null,-1)]))):(l(),B(U(m(N)[A.value.icon]),{key:0,class:"text-identity dark:text-gray-300 w-5 h-5"}))]),a("span",null,c(A.value.text),1)])],10,Zt)):Q("",!0),I.value.show?(l(),u("button",{key:1,onClick:it,class:f(["px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border rounded-md dark:text-gray-200 dark:border-gray-200",[I.value.class]]),disabled:I.value.disabled},[a("div",sa,[a("div",oa,[I.value.loading?(l(),u("svg",na,e[10]||(e[10]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"},null,-1)]))):(l(),B(U(m(N)[I.value.icon]),{key:0,class:"text-identity dark:text-gray-300 w-5 h-5"}))]),a("span",null,c(I.value.text),1)])],10,aa)):Q("",!0),a("button",{onClick:e[3]||(e[3]=s=>J.value?null:je()),class:f(["px-4 py-2 text-sm text-identity capitalize transition-colors duration-200 border-color-identity-dark rounded-md dark:text-gray-200 dark:border-gray-200",[Y.value&&!ge.value?"bg-emerald-500 hover:bg-emerald-400 dark:bg-emerald-600 dark:hover:bg-emerald-400":"bg-gray-400"]]),disabled:!Y.value||J.value},[a("div",la,[a("div",ia,[J.value?(l(),B(U(m(N).IconLoading),{key:1})):(l(),B(U(m(N).IconGantt),{key:0,class:"text-identity dark:text-gray-200 w-5 h-5"}))]),e[11]||(e[11]=a("span",null,null,-1)),J.value?(l(),u("span",ca," Cargando... ")):(l(),u("span",da,c(ge.value?"Ocultar Gantt Planeación":"Ver Gantt Planeación"),1))])],10,ra)]),(l(!0),u(G,null,z(v.value,(s,i)=>w((l(),u("div",{key:i,class:"bg-gray-300 mb-4 rounded-lg border border-solid border-gray-600"},[a("div",{class:"flex justify-between items-center py-4 px-10 text-center cursor-pointer rounded-lg border-b border-gray-600",style:{"border-bottom-width":"0.5px"},onClick:g=>Ue(i)},[a("h2",ga,[Ce(c(s.show_data)+" ",1),a("div",{class:f(["inline-flex items-center px-3 py-1 rounded-full ml-4",["bg-cyan-100 border border-cyan-600"]])},[a("h2",{class:f(["text-sm text-center font-normal",["text-cyan-800"]])},c(Ye(i))+" Actividades seleccionadas. ",1)])]),a("span",va,[R.value[i]?(l(),u("svg",pa,e[12]||(e[12]=[a("path",{"fill-rule":"evenodd",d:"M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(l(),u("svg",fa,e[13]||(e[13]=[a("path",{"fill-rule":"evenodd",d:"M14.707 10.707a1 1 0 01-1.414 0L10 7.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1)])))])],8,ua),w(a("div",xa,[a("div",ma,[a("div",ba,[e[14]||(e[14]=a("h2",{class:"text-lg text-center text-amber-800 dark:text-gray-300"}," Fecha Inicio Planeada Etapa: ",-1)),a("h2",ya,c(m(M)(s.fecha_inicio_planeada)),1)]),e[16]||(e[16]=a("div",{class:"flex flex-col justify-center basis-1/3"},null,-1)),a("div",ha,[e[15]||(e[15]=a("h2",{class:"text-lg text-center text-amber-800 dark:text-gray-300"}," Fecha Entrega Planeada Etapa: ",-1)),a("h2",wa,c(m(M)(s.fecha_entrega_planeada)),1)])]),a("div",_a,[a("div",ka,[e[17]||(e[17]=a("h2",{class:"text-lg text-center text-cyan-800 dark:text-gray-300"}," Fecha Inicio Real Etapa: ",-1)),a("h2",Ia,c(m(M)(s.fecha_inicio_real)),1)]),a("div",Ea,[e[19]||(e[19]=a("h2",{class:"text-lg text-center text-cyan-800 dark:text-gray-300"}," Responsables Etapa: ",-1)),Z(o,{triggers:["hover"],placement:"top",class:"flex justify-center"},{popper:oe(()=>[a("div",Ra,[(l(!0),u(G,null,z(s.responsables,g=>w((l(),u("div",{key:g.id,class:"basis-full text-sm font-normal text-center rtl:text-right text-identity dark:text-gray-300"},[a("div",Sa,[a("span",Aa," • "+c(g.nombre_completo),1)])])),[[T,s.responsables.length>0]])),128)),w(a("div",Oa,e[18]||(e[18]=[a("h2",{class:"text-sm font-semibold text-red-800"}," Sin responsables. ",-1)]),512),[[T,s.responsables.length===0]])])]),default:oe(()=>[a("button",Ca,[(l(),B(U(m(N).IconPeople),{class:f(["w-5 h-5","text-cyan-800"])}))])]),_:2},1024)]),a("div",Ba,[e[20]||(e[20]=a("h2",{class:"text-lg text-center text-cyan-800 dark:text-gray-300"}," Fecha Entrega Real Etapa: ",-1)),a("h2",Ta,c(m(M)(s.fecha_entrega_real)),1)])]),a("div",Da,[a("div",Na,[e[21]||(e[21]=a("h2",{class:"text-lg text-center text-orange-800 dark:text-gray-300"}," Horas Estimadas Etapa: ",-1)),a("h2",Pa,c(s.horas_estimadas_etapa),1)]),a("div",ja,[e[22]||(e[22]=a("h2",{class:"text-lg text-center text-orange-800 dark:text-gray-300"}," Horas Estimadas Ingeniería: ",-1)),a("h2",La,c(s.horas_estimadas_ingenieria),1)]),a("div",Va,[e[23]||(e[23]=a("h2",{class:"text-lg text-center text-orange-800 dark:text-gray-300"}," Horas Estimadas Dibujo: ",-1)),a("h2",Ga,c(s.horas_estimadas_dibujo),1)])]),a("div",za,[a("div",Ua,[e[24]||(e[24]=a("h2",{class:"text-lg text-center text-teal-800 dark:text-gray-300"}," Tiempo Planeado Etapa: ",-1)),a("h2",Ma,c(m(ue)(s.tiempo_planeado)),1)]),a("div",$a,[e[25]||(e[25]=a("h2",{class:"text-lg text-center text-teal-800 dark:text-gray-300"}," Tiempo Real Etapa: ",-1)),a("h2",Ha,c(m(ue)(s.tiempo_real)),1)]),a("div",qa,[e[26]||(e[26]=a("h2",{class:"text-lg text-center text-teal-800 dark:text-gray-300"}," Progreso Etapa: ",-1)),a("div",Fa,[a("div",Ja,[a("div",{class:f(["absolute top-0 bottom-0 left-0 rounded-lg",pt(s.progreso)]),style:kt({width:`${s.progreso}%`})},null,6),a("div",{class:f(["relative font-medium text-sm",ft(s.progreso)])},c(s.progreso)+"% ",3)])])])]),Z(Ot,{ref_for:!0,ref:g=>Je(g,s),table:"actividadesOrdenEtapa","icons-view":[],"row-selected":s,"show-search":!1,onSelectedRows:g=>Ke(i,g),"select-rows-by":ae.value},null,8,["row-selected","onSelectedRows","select-rows-by"])],512),[[T,!R.value[i]]])])),[[T,v.value.length>0]])),128)),w(a("div",null,e[27]||(e[27]=[a("h2",{class:"my-4 text-2xl text-identity-dark dark:text-gray-300 text-center"}," No hay actividades para mostrar ",-1)]),512),[[T,v.value.length===0]])])):Q("",!0)])}}};export{xs as default};
